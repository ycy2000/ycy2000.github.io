<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>File Upload</title>
</head>
<body>
    <input type="file" id="file_input" webkitdirectory>
    <div class="file_list_container"></div>
</body>
<script>
const fileInput = document.querySelector('#file_input');
const fileListContainer = document.querySelector('.file_list_container');

fileInput.addEventListener('change', displaySelectedDirectories);

function displaySelectedDirectories() {
  console.log('script')
    const selectedDirectories = fileInput.files;

    // 그룹화된 파일을 저장할 객체 생성
    const filesByDirectory = {};

    // 선택한 디렉터리 내의 파일을 그룹화
    for (const file of selectedDirectories) {
      console.log('script : displaySelectedDirectories')
        const directoryPath = file.webkitRelativePath.split('/').slice(1, -1).join('/'); // 디렉터리 경로 추출

        if (!filesByDirectory[directoryPath]) {
            filesByDirectory[directoryPath] = [];
        }

        filesByDirectory[directoryPath].push(file);
    }

    // 파일을 그룹화된 디렉터리별로 나열
    const directoryList = document.createElement('ul');
    fileListContainer.appendChild(directoryList);

    for (const directoryPath in filesByDirectory) {
        const directoryItem = document.createElement('li');
        const directoryName = document.createElement('div');

        directoryName.textContent = directoryPath;
        directoryItem.appendChild(directoryName);

        const fileList = document.createElement('ul');
        for (const file of filesByDirectory[directoryPath]) {
            const fileItem = document.createElement('li');
            const fileName = document.createElement('div');

            fileName.textContent = file.name;
            fileItem.appendChild(fileName);
            fileList.appendChild(fileItem);
        }

        directoryItem.appendChild(fileList);
        directoryList.appendChild(directoryItem);
    }
}
</script>
</html>